name: CI / CD T-AIA-910-REN_1

on:
  push:
    branches:
      - main
      - speech_to_text

jobs:
  tests:
    name: 'tests'
    runs-on: ubuntu-20.04
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: tests docker-compose build and up
        run: |
          docker-compose build 
          docker-compose up -d 
          sleep 2 
      - name: tests speechtotext
        run: |
          cd speechtotext/tests
          python3 tests.py
          cd -
      - uses: actions/checkout@master
      - name: copy file via ssh password
        uses: appleboy/scp-action@master
        with:
          host: 51.255.173.25
          username: ubuntu
          password: QAYxupCRSqkf
          source: "/home/ubuntu/T-AIA-910/asset_tests/*"
          target: "."

